## DB initialization

CREATE TABLE users (
	id INTEGER PRIMARY KEY AUTOINCREMENT, 
	name VARCHAR(64) UNIQUE NOT NULL, 
	email VARCHAR(255) UNIQUE NOT NULL, 
	home_page VARCHAR(255)
);

CREATE TABLE comments (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	coords VARCHAR(32),
	xhtml BLOB NOT NULL,
	date DATETIME NOT NULL,
	parent_id INTEGER,
	CONSTRAINT fk_parent_comment
	FOREIGN KEY (parent_id) REFERENCES comments (id)
);

CREATE TABLE imgs (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	path VARCHAR(255) UNIQUE NOT NULL,
	width INT8 NOT NULL,
	height INT8 NOT NULL,
	comment_id INTEGER,
	CONSTRAINT fk_comment_img
	FOREIGN KEY (comment_id) REFERENCES comments (id)
);

CREATE TABLE txts (
	id INTEGER PRIMARY KEY AUTOINCREMENT,
	path VARCHAR(255) UNIQUE NOT NULL,
	comment_id INTEGER,
	CONSTRAINT fk_comment_txt
	FOREIGN KEY (comment_id) REFERENCES comments (id)
);